% !TEX root = ../main.tex
\section{Algebraic Geometry using Schemes}

\subsection{Sheaves \& Presheaves}

\subsubsection{Presheaves}

\begin{definition}
    Consider a category $\mathcal{C}$. A \emph{presheaf} on $\mathcal{C}$ is a contravariant functor $\pazocal{F}: \mathcal{C}\rightarrow \mathrm{Set}$.\\
    For a subcategory $\mathcal{C}'$ of $\mathrm{Set}$, a \emph{$\mathcal{C}'$-valued presheaf} on $\mathcal{C}$ is a contravariant functor $\pazocal{F} : \mathcal{C}\rightarrow \mathcal{C}'$. We denote the image of a morphism $\varphi: V \rightarrow U$ under $\pazocal{F}$ by $\varphi_{UV}$.
\end{definition}
\begin{remark}
    We will mainly be interested in the case of $\mathcal{C}$ being obtained from a topological space: Consider a topological space $(X,\tau_X)$. We consider the category $\pazocal{T}(X)$ induced by the preorder on $\tau_X$. This will be called a \emph{presheaf on $X$}. Moreover we will mainly be interested in presheaves valued in algebraic categories such as $\mathrm{Group},\mathrm{AbGroup},\mathrm{Ring}$, etc.\\  
\end{remark}
\begin{example}
    Let $X$ be a variety. Then $$\Gamma: (\tau_X,\subset) \rightarrow \mathrm{FinAlg}_K, (U, W\subset V)\mapsto (\Gamma(U), \widetilde{\varphi}: \Gamma(V)\rightarrow \Gamma(W), f \mapsto \left.f\right|_{W})$$
    defines a presheaf on $\pazocal{T}(X)$ respect to the Zariski topology. 
\end{example}
\begin{definition}\label{RestrictionInImageOfPresheaf}
    For objects $U,V$ in $\pazocal{C}$ and a morphism $\varphi: V\rightarrow U$, for an  $s\in \pazocal{F}(U)$, we define \emph{restriction of $s$ to $V$} to be $$\left. s\right|_{V}:= \varphi_{UV}.$$
\end{definition}
\subsubsection{Sheaves}
\begin{definition}
    Consider a topological space $X$. Let $\pazocal{F}$ be a presheaf on a category $\pazocal{T}(X)$. $\pazocal{F}$ is called a \emph{sheaf on $X$} if moreover, 
    \begin{enumerate}
        \item For every open $U\subset X$ and every open cover $\{U_i\}$ of $U$ and every $\phi,\varphi\in \pazocal{F}(U)$, if $\left.\varphi\right|_{U_i}= \left.\phi\right|_{U_i}$ for every $i$, then $\varphi=\phi$.
        \item For every open $U\subset X$ and every open covering $\{U_i\}$ and for every collection of elements (functions) 
        $$\left\{s_i\in \pazocal{F}(U_i): \left.s_i\right|_{U_i\cap U_j}=\left. s_j\right|_{U_i\cap U_j} \text{ for every }j\right\}_{i}$$
        there is an element $s\in \pazocal{F}(U)$ such that $\left.s\right|_{U_i}=s_i$ for each $i$.   
    \end{enumerate}
    A sheaf valued in a subcategory of $\mathrm{Set}$ is defined in a similar way for sheaves to how it was defined for presheaves. 
\end{definition}
\begin{remark}
    By condition 1. an element $s\in \pazocal{F}(U)$ obtained as described in 2. is unique.
\end{remark}
\begin{lemma}
    Consider a topological space $X$ and a presheaf $\pazocal{F}$ on $X$ valued in the category of abelian groups that satisfies the second condition of being a sheaf. Then $\pazocal{F}$ is a sheaf on $X$ if and only if for every open $U\subset X$ every open covering $\{U_i\}$ and every $s\in \pazocal{F}(U)$, if $\left.s\right|_{U_i}=0$ for every $i$, then $s=0$.   
\end{lemma}
\begin{proof}
    "$\implies$": If $\pazocal{F}$ is a sheaf on $X$, then since $\left. s\right|_{U_i}=0=\left.0\right|_{0}$ for every $i$, then $s=0$.\\
    "$\impliedby$": If $\left. s\right|_{U_i} = \left. t\right|_{U_i}$ for every $i$, hence 
    $$0=\left. s\right|_{U_i} - \left. t\right|_{U_i} = \left. s-t\right|_{U_i}$$
    for every $i$, which by assumption means $s-t=0$. 
\end{proof}
\begin{example}
    The presheaf $\Gamma$ on a variety $X$ seen as a space equipped with the Zariski topology is a sheaf. Consider an subvariety $U\subset X$ and open covering $\{U_i\}$ of $U$ and suppose there is a regular function $f\in \Gamma(U)$ such that $\left. f\right|_{U_i}=0$ for every $i$. Viewing $f$ as a function $U$ it follows that given a point $x\in U$ since $x\in U_i$ for some $i$, 
    $$f(x)=\left.f\right|_{U_i}(x)= 0 \implies f = 0.$$
    Consider an open covering, $\{U_i\}$ of a subvariety $U\subset X$ and a collection of regular functions 
    $$\left\{f_i\in \Gamma(U_i): \left.f_i\right|_{U_i\cap U_j}= \left. f_j\right|_{U_i\cap U_j} \right\}_i,$$
    then the function 
    \begin{gather*}
        f : U \rightarrow K \\
         x\mapsto f_i(x) \quad \text{if } x\in U_i
    \end{gather*} 
    is a regular function on $U$ such that $\left. f\right|_{U_i} = f_i$. Indeed, restriction in the sense of Definition~\ref{RestrictionInImageOfPresheaf} is in this instance literally restriction in the usual sence, so the definition of $f$ is indenpendent of the choice of $U_i$.
\end{example}
\begin{definition}
    Given a category $\pazocal{C}$ \emph{a morphism of presheaves} is just a morphism in the functor category $\mathrm{Set}^{\pazocal{C}\op}$, i.e. a morphism $\Phi: \pazocal{F} \rightarrow \pazocal{G}$ of parallel presheaves on $\pazocal{C}$ is just a natural transformation $\Phi : \pazocal{F}\Rightarrow \pazocal{G}$.\\
    An isomorphism of presheaves is therefor just a natural isomorphism of presheaves. \\
    \emph{A morphism of sheaves} is just a morphism of presheaves in the category of sheaves, $\mathrm{Sh}(X)$, which is a subcategory of $\mathrm{Set}^{\pazocal{T}(X)\op}$.   
\end{definition}
\subsection{Schemes}
We adopt the convention that all rings are commutative.
\subsubsection{Affine Schemes}
\begin{definition}
    For a ring $R$, we define \emph{the spectrum of $R$} to be the set
    $$
        \Spec\ R := \{ I \subset R : I \text{ is a prime ideal}\}
    $$
    For an ideal $I\subset R$, we define 
    $$
        V(I) := \{ J\in \Spec \ R : I\subset J\}
    $$
\end{definition}
\begin{lemma}
    If $I\subset J\subset R$ are ideals, then $V(I)\supset V(J)$.
\end{lemma}
\begin{proof}
    This is trivial. 
\end{proof}
\begin{lemma}
    For ideals $I,J\subset R$
    $$V(IJ) = V(I)\cup V(J).$$
\end{lemma}
\begin{proof}
    Consider a prime ideal $\mathfrak{P}\in \Spec \ R$ containing $IJ$. Then given $ab\in IJ$ with $a\in I$ and $b\in J$ we have that $a \in \mathfrak{P}$ or $b\in \mathfrak{P}$, hence $\mathfrak{P}\in V(I)\cup V(J)$. The converse inclusion follows from $I,J\supset IJ$ by the prior lemma. 
\end{proof}
\begin{lemma}
    For a family of ideals $\{I_\mu\}$ in $R$, 
    $$V(\sum_\mu I_\mu) = \bigcap_\mu V(I_\mu).$$ 
\end{lemma}
\begin{proof}
    Again one inclusion follows from $I_\nu\subset \sum_\mu I_\mu$. Suppose conversely that $\mathfrak{P}\in \Spec \ R$ is given such that it contains every $I_\mu$, then since ideals are closed under addition it contains $\sum_\mu I_\mu$.  
\end{proof}
\begin{proposition}
    For a ring $R$, the family of sets 
    $$
        \{V(I) : I \text{ is an ideal in } R\}
    $$
    are the closed set in a topology on $\Spec \ R$. 
\end{proposition}
\begin{proof}
    Indeed, note that 
    $$\bigcap_{I\subset R} V(I) = V\left(\sum_{I\subset R} I\right)= V(R) = \emptyset.$$
    and that $\Spec\ R = V(0)$. The two prior lemmas show that this family is closed under countable union and intersection over arbitrary index sets. 
\end{proof}
\begin{remark}
    The topology in question is unsurprisingly called the \emph{Zariski topology on $\Spec \ R$}. For an algebraically closed field $K$ and an affine variety $V\subset \A^n$, the points of $V$ correspond to the maximal ideals of $\Gamma(V)$. In this way we can identify $V$ with the subspace of maximal ideals of $\Gamma(V)$ in $\Spec \ \Gamma(V)$. In this sense $\Spec \ \Gamma(V)$ is a refinement of the notion of point in a variety. Namely, \emph{point} in $V$ have by definition come to mean the \emph{subvariety} of $V$, when we take the view that our vantage point lies in $\Spec\ \Gamma(V)$ when studying $V$.
\end{remark}
\begin{lemma}
    If $I,J\subset R$ are ideals, then $V(I)\subset V(J)$ if and only if $\rad(I)\supset \rad(J)$.
\end{lemma}
\begin{proof}
    Note that $V(I)\subset V(J)$ if and only if every prime ideal that contains $I$ also contains $J$ which again is equivalent to 
    $$
        \bigcap_{\mathfrak{p}\supset I \text{ prime }} \mathfrak{p} \supset \bigcap_{\mathfrak{p}\supset J \text{ prime }} \mathfrak{p}, 
    $$
    which by lemma \ref{RadicalOfIdealIsIntersectionOfAllPrimeIdealsContainingIt} is equivalent to 
    $$
        \rad(I)\supset \rad(J).
    $$
\end{proof}
Given a ring $R$ and prime ideal $\mathfrak{p}$ in $R$. We denote the localization of $R$ with respect to $\mathfrak{p}$ by $R_\mathfrak{p}$.
\begin{definition}
    Given a ring $R$, we define a presheaf on $\Spec \ R$ by, 
    \begin{gather*}
        \pazocal{O}:(\Spec\ R, \tau_{\Spec\ R})\op\rightarrow \mathrm{Ring}\\
        U \mapsto \prod_{\mathfrak{p}\in U} R_\mathfrak{p}\\
        U\subset V \mapsto (\prod_{\mathfrak{p}\in V} R_\mathfrak{p}\rightarrow \prod_{\mathfrak{p}\in U} R_\mathfrak{p}, s\mapsto \left. s\right|_U) 
    \end{gather*}
\end{definition}
\begin{remark}
    Clearly this presheaf is a sheaf, since the elements of $\pazocal{O}(U)$ are functions and restriction is just set function restriction in the same we saw in the example discussing the presheaf $\Gamma$. 
\end{remark}
\begin{definition}
    An \emph{affine scheme} is a topological space...
\end{definition}

